<div class="dashboard-page container-fluid p-4">
    <!-- Page Header: Title (left) | Add Digital Assets (right) -->
    <div class="dashboard-header row align-items-center">
        <h1 class="dashboard-page-title col">Digital Assets Monitoring Dashboard</h1>
        <div class="col-auto d-flex align-items-center gap-2">
            <a routerLink="/add-digital-assets" class="btn btn-primary">
                <mat-icon>add</mat-icon>
                Add Digital Assets
            </a>
        </div>
    </div>

    <!-- Digital Assets Overall Performance (card: title + badge, pill bar, legend) -->
    <section class="performance-section" aria-label="Digital Assets Overall Performance">
        <div class="performance-card">
            <div class="performance-card-header">
                <h2 class="performance-card-title">Digital Assets Overall Performance</h2>
                <span class="performance-badge">{{ performanceBar().compliantPct }}% Compliant</span>
            </div>
            <div class="performance-bar" role="presentation">
                <span class="performance-segment performance-offline" [style.width.%]="performanceBar().offlinePct" title="Assets Offline"></span>
                <span class="performance-segment performance-non-compliant" [style.width.%]="performanceBar().nonCompliantPct" title="Assets Non Compliant"></span>
                <span class="performance-segment performance-compliant" [style.width.%]="performanceBar().compliantPct" title="Assets Compliant"></span>
            </div>
            <div class="performance-legend">
                <div class="performance-legend-item performance-legend-offline">
                    <span class="performance-legend-bullet" aria-hidden="true"></span>
                    <span class="performance-legend-label">{{ performanceBar().offlinePct }}% Assets Offline</span>
                </div>
                <div class="performance-legend-item performance-legend-non-compliant">
                    <span class="performance-legend-bullet" aria-hidden="true"></span>
                    <span class="performance-legend-label">{{ performanceBar().nonCompliantPct }}% Assets Non Compliant</span>
                </div>
                <div class="performance-legend-item performance-legend-compliant">
                    <span class="performance-legend-bullet" aria-hidden="true"></span>
                    <span class="performance-legend-label">{{ performanceBar().compliantPct }}% Assets Compliant</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Key Metrics: 8 cards in 2 rows x 4 columns -->
    @if (dashboardKpis().isVisible) {
        <div class="kpi-grid">
            @for (item of dashboardKpisDisplay(); track item.id) {
                <app-dashboardkpi class="kpi-card-cell" [item]="item" (cardAction)="onKpiCardAction($event)"></app-dashboardkpi>
            }
        </div>
    }
</div>
