<div class="container-fluid p-4">
  <!-- Breadcrumb Navigation -->
  <app-reusable-breadcrum
    [breadcrumbs]="[
      { label: 'Dashboard', path: '/dashboard' },
      { label: 'Assets', path: '/ministry-detail' },
      { label: 'Ministry of Health', path: '/ministry-detail' },
      { label: 'Health Dashboard' },
    ]"
  ></app-reusable-breadcrum>

  <!-- Health Dashboard Card -->
  <div class="health-dashboard-card">
    <h1 class="dashboard-title">Health Dashboard</h1>
    
    <div class="dashboard-details">
      <div class="detail-row">
        <span class="detail-label">URL</span>
        <a [href]="'https://' + assetDetails.url" target="_blank" class="detail-value-link">{{ assetDetails.url }}</a>
      </div>
      
      <div class="detail-row">
        <span class="detail-label">MINISTRY</span>
        <span class="detail-value">{{ assetDetails.ministry }}</span>
      </div>
      
      <div class="detail-row">
        <span class="detail-label">DEPARTMENT</span>
        <span class="detail-value">{{ assetDetails.department }}</span>
      </div>
      
      <div class="detail-row">
        <span class="detail-label">CITIZEN IMPACT LEVEL</span>
        <span class="badge badge-citizen-impact">{{ assetDetails.citizenImpactLevel }}</span>
      </div>
      
      <div class="detail-row">
        <span class="detail-label">CURRENT STATUS</span>
        <span class="badge badge-status">{{ assetDetails.currentStatus }}</span>
      </div>
      
      <div class="detail-row">
        <span class="detail-label">LAST OUTAGE</span>
        <span class="detail-value">{{ assetDetails.lastOutage }}</span>
      </div>
      
      <div class="detail-row">
        <span class="detail-label">CURRENT HEALTH</span>
        <span class="badge badge-health">{{ assetDetails.currentHealth }}</span>
      </div>
      
      <div class="detail-row">
        <span class="detail-label">RISK EXPOSURE INDEX</span>
        <span class="detail-value-risk">{{ assetDetails.riskExposureIndex }}</span>
      </div>
    </div>
    
    <div class="dashboard-actions">
      <button class="btn-analyze" (click)="onAnalyze()">Analyze</button>
    </div>
  </div>

  <!-- Summary KPI Cards -->
  <div class="kpi-cards-section">
    <div class="kpi-card">
      <div class="kpi-value">{{ summaryKpis.citizenHappiness }}%</div>
      <div class="kpi-label">Citizen Happiness Metric</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-value">{{ summaryKpis.overallCompliance }}%</div>
      <div class="kpi-label">Overall Compliance Metric</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-value">{{ summaryKpis.openIncidents }}</div>
      <div class="kpi-label">Open incidents</div>
    </div>
    <div class="kpi-card">
      <div class="kpi-value">{{ summaryKpis.highSeverityOpenIncidents }}</div>
      <div class="kpi-label">High severity open incidents</div>
    </div>
  </div>

  <!-- Standards Compliance Overview -->
  <div class="standards-section">
    <h2 class="section-title">Compliance Overview</h2>
    <div class="section-separator"></div>
    <div class="standards-cards">
      <div class="standard-card" *ngFor="let standard of standardsCompliance">
        <div class="standard-name">{{ standard.name }}</div>
        <span class="status-badge" [ngClass]="getStatusBadgeClass(standard.status)">
          {{ standard.status }}
        </span>
      </div>
    </div>
  </div>

  <!-- Incidents Section -->
  <div class="incidents-section">
    <h2 class="section-title">Incidents</h2>
    <div class="section-separator"></div>
    <app-active-incidents 
      [showHeader]="false" 
      [showBreadcrumb]="false" 
      [showAddButton]="false">
    </app-active-incidents>
  </div>

  <!-- Ownership & Accountability Section -->
  <div class="ownership-section">
    <h2 class="section-title">Ownership & Accountability</h2>
    <div class="section-separator"></div>
    <div class="ownership-cards">
      <div class="ownership-card">
        <div class="ownership-label">OWNER NAME</div>
        <div class="ownership-value">{{ ownership.ownerName }}</div>
      </div>
      <div class="ownership-card">
        <div class="ownership-label">OWNER EMAIL</div>
        <div class="ownership-value">{{ ownership.ownerEmail }}</div>
      </div>
      <div class="ownership-card">
        <div class="ownership-label">OWNER CONTACT</div>
        <div class="ownership-value">{{ ownership.ownerContact }}</div>
      </div>
      <div class="ownership-card">
        <div class="ownership-label">TECHNICAL OWNER NAME</div>
        <div class="ownership-value" [ngClass]="{'not-assigned': !ownership.technicalOwnerName}">
          {{ ownership.technicalOwnerName || 'Not Assigned' }}
        </div>
      </div>
      <div class="ownership-card">
        <div class="ownership-label">EMAIL</div>
        <div class="ownership-value">{{ ownership.technicalOwnerEmail || 'NA' }}</div>
      </div>
      <div class="ownership-card">
        <div class="ownership-label">CONTACT</div>
        <div class="ownership-value">{{ ownership.technicalOwnerContact || 'NA' }}</div>
      </div>
    </div>
  </div>
</div>
