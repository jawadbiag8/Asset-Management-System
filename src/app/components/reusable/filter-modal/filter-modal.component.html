<div class="modal-container">
  <div class="modal-header">
    <h2 class="modal-title">Filter Options</h2>
    <button class="close-button" (click)="onClose()" type="button">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <div class="modal-content">
    @for (filter of filters; track filter.id) {
      @if (filter.options) {
        <div class="filter-category">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Select {{ filter.label.split(':')[0] }}</mat-label>
            <mat-select 
              [formControl]="getSelectControl(filter.id)"
              (selectionChange)="onSelectChange(filter.id, $event.value)">
              <mat-option>
                <ngx-mat-select-search 
                  [formControl]="getFilterControl(filter.id)"
                  [placeholderLabel]="'Search...'">
                </ngx-mat-select-search>
              </mat-option>
              @if ((getFilteredOptions(filter.id) | async)?.length === 0) {
                <mat-option disabled>No data found</mat-option>
              }
              @for (option of getFilteredOptions(filter.id) | async; track option.value) {
                <mat-option [value]="option.value">{{ option.label }}</mat-option>
              }
            </mat-select>
          </mat-form-field>
        </div>
      }
    }
  </div>

  <div class="modal-footer">
    <button class="btn-reset" (click)="onReset()" type="button">
      Reset
    </button>
    <button class="btn-apply" (click)="onApply()" type="button">
      Apply Filters
    </button>
  </div>
</div>
